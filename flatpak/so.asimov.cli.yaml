app-id: so.asimov.cli
runtime: org.freedesktop.Platform
runtime-version: "24.08"
sdk: org.freedesktop.Sdk
command: asimov

finish-args:
  - --share=network

modules:
  - name: asimov_cli
    buildsystem: simple

    sources:
      # ASIMOV CLI
      - type: file
        url: "https://github.com/asimov-platform/asimov-cli/releases/download/25.0.0-dev.4/asimov-linux-x86-gnu.gz"
        sha256: "6b6e54fd490e036d864158de7d4b19a248aaf64c926ff9d3daa9db0f463d6f9c"
        only-arches: [x86_64]
        dest-filename: "asimov.gz"

      - type: file
        url: "https://github.com/asimov-platform/asimov-cli/releases/download/25.0.0-dev.4/asimov-linux-arm-gnu.gz"
        sha256: "ef21144725eeccd0618357f0bb4936d1653a8968bfa8b530fa2490685470dc33"
        only-arches: [aarch64]
        dest-filename: "asimov.gz"

      # ASIMOV MODULE CLI
      - type: file
        url: "https://github.com/asimov-platform/asimov-module-cli/releases/download/25.0.0-dev.3/asimov-module-cli-linux-x86-gnu.gz"
        sha256: "dc0c2951287df99aa20d50e2525395c62de1c2cbc716c075b9fff5003cbaa4d3"
        only-arches: [x86_64]
        dest-filename: "asimov-module.gz"

      - type: file
        url: "https://github.com/asimov-platform/asimov-module-cli/releases/download/25.0.0-dev.3/asimov-module-cli-linux-arm-gnu.gz"
        sha256: "be254a76dbe1a529c98dc244a1fa7dffca046817590295f08c5a605761dde55b"
        only-arches: [aarch64]
        dest-filename: "asimov-module.gz"

      # ASIMOV DATASET CLI
      - type: file
        url: "https://github.com/asimov-platform/asimov-dataset-cli/releases/download/25.0.0-dev.6/asimov-dataset-cli-linux-x86-gnu.gz"
        sha256: "f154eac9ae686cfea8d5e72b5ca96c45f77ac50e7585ca09c53e4306954044e5"
        only-arches: [x86_64]
        dest-filename: "asimov-dataset.gz"

      - type: file
        url: "https://github.com/asimov-platform/asimov-dataset-cli/releases/download/25.0.0-dev.6/asimov-dataset-cli-linux-arm-gnu.gz"
        sha256: "73c35e9a608b22ae8c041e3322757eb37aedd5af2072ed867d0819509ad893b7"
        only-arches: [aarch64]
        dest-filename: "asimov-dataset.gz"

    build-commands:
      - "gunzip asimov.gz"
      - "gunzip asimov-module.gz"
      - "gunzip asimov-dataset.gz"
      - "chmod 755 asimov asimov-module asimov-dataset"
      - "install -Dm755 asimov         /app/bin/asimov"
      - "install -Dm755 asimov-module  /app/bin/asimov-module"
      - "install -Dm755 asimov-dataset /app/bin/asimov-dataset"
